(function(e){function t(t){for(var s,i,n=t[0],o=t[1],c=t[2],m=0,d=[];m<n.length;m++)i=n[m],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&d.push(l[i][0]),l[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,n=1;n<a.length;n++){var o=a[n];0!==l[o]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},l={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/admin/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),l=a.n(s);l.a},"19c5":function(e,t,a){},"1b23":function(e,t,a){"use strict";var s=a("e32b"),l=a.n(s);l.a},"38c8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=(a("034f"),a("2877")),n={},o=Object(i["a"])(n,l,r,!1,null,null,null),c=o.exports,u=a("5c96"),m=a.n(u);a("c69f");s["default"].use(m.a);var d=a("8c4f"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticClass:"main-container"},[s("el-header",[s("div",[s("img",{attrs:{src:a("b189"),alt:""}}),s("span",[e._v("王者荣耀官网后台管理系统")])]),s("el-button",{staticStyle:{color:"grey"},attrs:{type:"text",size:"middle"},on:{click:e.outLogin}},[s("i",{staticClass:"el-icon-switch-button",staticStyle:{color:"#fdb933"}}),e._v(" 退出")])],1),s("el-container",[s("el-aside",{staticStyle:{"background-color":"#545c64",overflow:"hidden"},attrs:{width:e.isCollpase?"52px":"199px"}},[s("div",{staticClass:"toggle-btn",on:{click:e.toggleCollpase}},[e.isCollpase?e._e():s("i",{staticClass:"el-icon-d-arrow-left"}),e.isCollpase?s("i",{staticClass:"el-icon-d-arrow-right"}):e._e()]),s("el-menu",{attrs:{"collapse-transition":!1,router:"","unique-opened":"",collapse:e.isCollpase,"default-active":e.activePath,"background-color":"#545c64","text-color":"#fff","active-text-color":"#fdb933"}},e._l(e.menus,(function(t,a){return s("el-submenu",{key:a,attrs:{index:t.index}},[s("template",{slot:"title"},[s("i",{class:t.icon,staticStyle:{"margin-right":"8px"}}),e._v(e._s(t.name))]),e._l(t.children,(function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.router},on:{click:function(a){return e.saveNavState(t.router)}}},[s("i",{class:t.icon}),e._v(e._s(t.name))])}))],2)})),1)],1),s("el-main",{staticClass:"mian-right"},[s("router-view")],1)],1)],1)},h=[],b={data(){return{isCollpase:!1,activePath:"",menus:[{name:"内容管理",icon:"el-icon-message",index:"1",children:[{name:"分类管理",icon:"el-icon-menu",router:"/categories/list"},{name:"英雄管理",icon:"el-icon-menu",router:"/heroes/list"},{name:"装备管理",icon:"el-icon-menu",router:"/items/list"}]},{name:"运营管理",icon:"el-icon-s-platform",index:"2",children:[{name:"广告管理",icon:"el-icon-menu",router:"/ads/list"},{name:"文章管理",icon:"el-icon-menu",router:"/articles/list"},{name:"视频管理",icon:"el-icon-menu",router:"/videos/list"},{name:"图文攻略",icon:"el-icon-menu",router:"/guides/list"}]},{name:"系统设置",icon:"el-icon-setting",index:"3",children:[{name:"管理员",icon:"el-icon-menu",router:"/admin_users/list"}]}]}},methods:{outLogin(){this.$confirm("是否退出当前账户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{window.localStorage.clear(),this.$router.push("/login")})},toggleCollpase(){this.isCollpase=!this.isCollpase},saveNavState(e){window.sessionStorage.setItem("activePath",e),this.activePath=e}},created(){this.activePath=window.sessionStorage.getItem("activePath")}},f=b,g=(a("7342"),Object(i["a"])(f,p,h,!1,null,"11e9bde9",null)),v=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"overlay"}),a("el-card",{staticClass:"box-card login-card",attrs:{header:"管理员登录",shadow:"hover"}},[a("el-form",{nativeOn:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("el-form-item",[a("el-input",{staticClass:"login-input",attrs:{placeholder:"用户名","prefix-icon":"el-icon-user",clearable:""},model:{value:e.logindata.username,callback:function(t){e.$set(e.logindata,"username",t)},expression:"logindata.username"}})],1),a("el-form-item",[a("el-input",{staticClass:"login-input",attrs:{type:"password",placeholder:"密码","prefix-icon":"el-icon-unlock","show-password":""},model:{value:e.logindata.password,callback:function(t){e.$set(e.logindata,"password",t)},expression:"logindata.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{type:"primary","native-type":"submit"}},[e._v("登录")])],1)],1)],1)],1)},$=[],w={data(){return{logindata:{}}},methods:{async login(){const e=await this.$http.post("login",this.logindata);localStorage.token=e.data.token;const t=e.data.user.username;this.$router.push("/"),this.$message({type:"success",message:t+"，欢迎您！"})}}},x=w,_=(a("a40c"),a("97b0"),Object(i["a"])(x,y,$,!1,null,"527ac997",null)),k=_.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"上级分类"}},[a("el-select",{model:{value:e.model.parent,callback:function(t){e.$set(e.model,"parent",t)},expression:"model.parent"}},e._l(e.parents,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"el-input-width",attrs:{clearable:"",maxlength:"10"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"title"}},[a("el-input",{staticClass:"el-input-width",attrs:{clearable:"",maxlength:"20"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"Banner图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.model.banner=t.url},"before-upload":e.beforeAvatarUpload}},[e.model.banner?a("img",{staticClass:"avatar",attrs:{src:e.model.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},z=[],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._l(e.breadcrumbItem,(function(t,s){return a("el-breadcrumb-item",{key:s},[e._v(e._s(t))])}))],2)],1)},I=[],B={name:"Breadcrumb",props:["breadcrumbItem"],data(){return{}},methods:{}},q=B,j=Object(i["a"])(q,S,I,!1,null,"80688ef2",null),O=j.exports,N={components:{Breadcrumb:O},props:{id:{}},data(){return{model:{},parents:[],breadcrumbItem:["内容管理","分类管理",`${this.id?"编辑分类":"新建分类"}`]}},methods:{afterUpload(e){this.model.banner=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},async save(){let e;this.id?(e=await this.$http.put(`rest/categories/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/categories",this.model),this.model=e.data),this.$router.push("/categories/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/categories/${this.id}`);this.model=e.data},async fetchParents(){const e=await this.$http.get("rest/categories");this.parents=e.data}},created(){this.fetchParents(),this.id&&this.fetch()}},E=N,U=Object(i["a"])(E,C,z,!1,null,"0ed7919b",null),A=U.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/categories/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.items,height:"550",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"parent.name",label:"上级分类"}}),a("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/categories/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},P=[],R={components:{Breadcrumb:O},data(){return{breadcrumbItem:["内容管理","分类管理"],items:[],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/categories?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query = ${this.query}`);this.items=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除分类"${e.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/categories/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},D=R,H=Object(i["a"])(D,T,P,!1,null,"48395630",null),L=H.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"el-input-width",attrs:{clearable:"",maxlength:"10"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":e.afterUpload,"before-upload":e.beforeAvatarUpload}},[e.model.icon?a("img",{staticClass:"avatar",attrs:{src:e.model.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},J=[],G={components:{Breadcrumb:O},props:{id:{}},data(){return{model:{},breadcrumbItem:["内容管理","装备管理",`${this.id?"编辑装备":"新建装备"}`]}},methods:{afterUpload(e){this.$set(this.model,"icon",e.url)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},async save(){let e;this.id?(e=await this.$http.put(`rest/items/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/items",this.model),this.model=e.data),this.$router.push("/items/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/items/${this.id}`);this.model=e.data}},created(){this.id&&this.fetch()}},V=G,F=Object(i["a"])(V,M,J,!1,null,null,null),Z=F.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/items/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.items,height:"550",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"name",label:"装备名称"}}),a("el-table-column",{attrs:{prop:"iocn",label:"装备图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"3rem"},attrs:{src:e.row.icon,alt:""}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/items/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},K=[],X={components:{Breadcrumb:O},data(){return{items:[],breadcrumbItem:["内容管理","装备管理"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/items?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query=${this.query}`);this.items=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除装备"${e.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/items/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},Y=X,Q=Object(i["a"])(Y,W,K,!1,null,"4bcfc44b",null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-tabs",{staticClass:"right-main",attrs:{value:"basic",type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{clearable:"",maxlength:"4","show-word-limit":""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"称号"}},[a("el-input",{attrs:{clearable:"",maxlength:"4","show-word-limit":""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"定位"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"Index"}},[a("el-input-number",{attrs:{step:1,min:0},model:{value:e.model.index,callback:function(t){e.$set(e.model,"index",t)},expression:"model.index"}})],1),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":e.afterUpload,"before-upload":e.beforeAvatarUpload}},[e.model.avatar?a("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"背景图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.model.banner=t.url},"before-upload":e.beforeAvatarUpload}},[e.model.banner?a("img",{staticClass:"avatar",attrs:{src:e.model.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"难度"}},[a("el-rate",{staticStyle:{"margin-top":"0.7rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),a("el-form-item",{attrs:{label:"技能"}},[a("el-rate",{staticStyle:{"margin-top":"0.7rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),a("el-form-item",{attrs:{label:"攻击"}},[a("el-rate",{staticStyle:{"margin-top":"0.7rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),a("el-form-item",{attrs:{label:"生存"}},[a("el-rate",{staticStyle:{"margin-top":"0.7rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),a("el-form-item",{attrs:{label:"顺风出装"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"逆风出装"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.items2,callback:function(t){e.$set(e.model,"items2",t)},expression:"model.items2"}},e._l(e.items,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"使用技巧"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:"",maxlength:"500","show-word-limit":""},model:{value:e.model.usageTips,callback:function(t){e.$set(e.model,"usageTips",t)},expression:"model.usageTips"}})],1),a("el-form-item",{attrs:{label:"对抗技巧"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:"",maxlength:"500","show-word-limit":""},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),a("el-form-item",{attrs:{label:"团战思路"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:"",maxlength:"500","show-word-limit":""},model:{value:e.model.teamTips,callback:function(t){e.$set(e.model,"teamTips",t)},expression:"model.teamTips"}})],1)],1),a("el-tab-pane",{attrs:{label:"英雄初识",name:"introductions"}},[a("el-tabs",{attrs:{value:"basic"}},[a("el-tab-pane",{attrs:{label:"图文介绍",name:"basic"}},[a("el-form-item",{attrs:{label:"图文介绍"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"photo",t.url)}}},[e.model.photo?a("img",{staticClass:"avatar",attrs:{src:e.model.photo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-tab-pane",{attrs:{label:"视频介绍",name:"videos"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.introductions.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加英雄介绍视频")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.introductions,(function(t,s){return a("el-col",{key:s},[a("el-form-item",{attrs:{label:"英雄  "}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"标题  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"视频  "}},[a("el-upload",{attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(e){return t.video=e.url},drag:"",multiple:""}},[t.video?a("video",{attrs:{src:t.video,width:"355",controls:""}}):e._e(),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("el-form-item",{attrs:{label:"投稿  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.submit,callback:function(a){e.$set(t,"submit",a)},expression:"item.submit"}})],1),a("el-form-item",{attrs:{label:"粉丝  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.fan,callback:function(a){e.$set(t,"fan",a)},expression:"item.fan"}})],1),a("el-form-item",{attrs:{label:"观看次数"}},[a("el-input",{attrs:{clearable:""},model:{value:t.view,callback:function(a){e.$set(t,"view",a)},expression:"item.view"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.introductions.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"英雄皮肤",name:"skins"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.skins.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加皮肤")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skins,(function(t,s){return a("el-col",{key:s,attrs:{md:12}},[a("el-form-item",{attrs:{label:"皮肤名称"}},[a("el-input",{attrs:{clearable:"",maxlength:"8","show-word-limit":""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"皮肤图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t,"photo",a.url)}}},[t.photo?a("img",{staticClass:"avatar",attrs:{src:t.photo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skins.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"英雄技能",name:"skills"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.skills.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加技能")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(t,s){return a("el-col",{key:s,attrs:{md:12}},[a("el-form-item",{attrs:{label:"名称  "}},[a("el-input",{attrs:{clearable:"",maxlength:"8","show-word-limit":""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"图标  "}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t,"icon",a.url)}}},[t.icon?a("img",{staticClass:"avatar",attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"冷却  "}},[a("el-input",{attrs:{clearable:"",maxlength:"50","show-word-limit":""},model:{value:t.delay,callback:function(a){e.$set(t,"delay",a)},expression:"item.delay"}})],1),a("el-form-item",{attrs:{label:"消耗  "}},[a("el-input",{attrs:{clearable:"",maxlength:"4","show-word-limit":""},model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"item.cost"}})],1),a("el-form-item",{attrs:{label:"描述  "}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:"",maxlength:"1000","show-word-limit":""},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",{attrs:{label:"小提示  "}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:"",maxlength:"200","show-word-limit":""},model:{value:t.tips,callback:function(a){e.$set(t,"tips",a)},expression:"item.tips"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"英雄关系",name:"partners"}},[a("el-tabs",{attrs:{value:"basic"}},[a("el-tab-pane",{attrs:{label:"最佳搭档",name:"basic"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.partners.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("最佳搭档")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.partners,(function(t,s){return a("el-col",{key:s,attrs:{md:12}},[a("el-form-item",{attrs:{label:"英雄  "}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"描述  "}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},clearable:"",maxlength:"1000","show-word-limit":""},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.partners.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"被谁克制",name:"restrained"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.restrained.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("被谁克制")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.restrained,(function(t,s){return a("el-col",{key:s,attrs:{md:12}},[a("el-form-item",{attrs:{label:"英雄  "}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"描述  "}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},clearable:"",maxlength:"1000","show-word-limit":""},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.restrained.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"克制谁",name:"restraints"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.restraints.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("克制谁")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.restraints,(function(t,s){return a("el-col",{key:s,attrs:{md:12}},[a("el-form-item",{attrs:{label:"英雄  "}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"描述  "}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},clearable:"",maxlength:"1000","show-word-limit":""},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.restraints.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"英雄攻略",name:"raiders"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.model.heroGuides.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加英雄攻略")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.heroGuides,(function(t,s){return a("el-col",{key:s},[a("el-form-item",{attrs:{label:"标题  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"英雄  "}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"封面图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t,"cover",a.url)}}},[t.cover?a("img",{staticClass:"avatar",attrs:{src:t.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"视频  "}},[a("el-upload",{attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(e){return t.video=e.url},drag:"",multiple:""}},[t.video?a("video",{attrs:{src:t.video,width:"355",controls:""}}):e._e(),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("el-form-item",{attrs:{label:"投稿  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.submit,callback:function(a){e.$set(t,"submit",a)},expression:"item.submit"}})],1),a("el-form-item",{attrs:{label:"粉丝  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.fan,callback:function(a){e.$set(t,"fan",a)},expression:"item.fan"}})],1),a("el-form-item",{attrs:{label:"观看次数  "}},[a("el-input",{attrs:{clearable:""},model:{value:t.view,callback:function(a){e.$set(t,"view",a)},expression:"item.view"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.heroGuides.splice(s,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},ae=[],se={props:{id:{}},components:{Breadcrumb:O},data(){return{items:[],heroes:[],categories:[],breadcrumbItem:["内容管理","英雄管理",`${this.id?"编辑英雄":"新建英雄"}`],model:{name:"",avatar:"",banner:"",photo:"",scores:{difficult:0,skills:0,attack:0,survive:0},skills:[],skins:[],partners:[{hero:null,description:""}],restraints:[{hero:null,description:""}],restrainted:[{hero:null,description:""}],introductions:[{hero:null,video:"",submit:"",fan:""}],heroGuides:[{hero:null,title:"",cover:"",video:"",submit:"",fan:"",see:""}]}}},methods:{afterUpload(e){this.model.avatar=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},async save(){let e;this.id?(e=await this.$http.put(`rest/heroes/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/heroes",this.model),this.model=e.data),this.$router.push("/heroes/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/heroes/${this.id}`);this.model=e.data},async getCategories(){const e=await this.$http.get("rest/categories");this.categories=e.data},async getItems(){const e=await this.$http.get("rest/items");this.items=e.data},async getHeroes(){const e=await this.$http.get("rest/heroes");this.heroes=e.data},async handleImageAdded(e,t,a,s){const l=new FormData;l.append("file",e);const r=await this.$http.post("upload",l);t.insertEmbed(a,"image",r.data.url),s()}},created(){this.getItems(),this.getCategories(),this.id&&this.fetch(),this.getHeroes()}},le=se,re=(a("9de8"),Object(i["a"])(le,te,ae,!1,null,null,null)),ie=re.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/heroes/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.heroes,border:"",stripe:"",height:"550"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"name",label:"英雄名称"}}),a("el-table-column",{attrs:{prop:"title",label:"英雄称号"}}),a("el-table-column",{attrs:{prop:"avatar",label:"英雄头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"3rem"},attrs:{src:e.row.avatar,alt:""}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/heroes/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},oe=[],ce={components:{Breadcrumb:O},data(){return{heroes:[],breadcrumbItem:["运营管理","英雄管理"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/heroes?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query=${this.query}`);this.heroes=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除英雄"${e.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/heroes/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},ue=ce,me=Object(i["a"])(ue,ne,oe,!1,null,"4ee5876c",null),de=me.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"文章分类"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{clearable:"",maxlength:"100"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"正文"}},[a("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.model.body,callback:function(t){e.$set(e.model,"body",t)},expression:"model.body"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},he=[],be=a("5873"),fe={components:{Breadcrumb:O,VueEditor:be["a"]},props:{id:{}},data(){return{model:{},categories:[],breadcrumbItem:["运营管理","文章管理",`${this.id?"编辑文章":"新建文章"}`]}},methods:{async save(){let e;this.id?(e=await this.$http.put(`rest/articles/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/articles",this.model),this.model=e.data),this.$router.push("/articles/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/articles/${this.id}`);this.model=e.data},async fetchCatgories(){const e=await this.$http.get("rest/categories");this.categories=e.data},async handleImageAdded(e,t,a,s){const l=new FormData;l.append("file",e);const r=await this.$http.post("upload",l);t.insertEmbed(a,"image",r.data.url),s()}},created(){this.fetchCatgories(),this.id&&this.fetch()}},ge=fe,ve=Object(i["a"])(ge,pe,he,!1,null,null,null),ye=ve.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/articles/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.items,height:"550",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"title",label:"文章标题"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/articles/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},we=[],xe={components:{Breadcrumb:O},data(){return{items:[],breadcrumbItem:["运营管理","文章管理"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/articles?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query=${this.query}`);this.items=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除文章"${e.title}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/articles/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},_e=xe,ke=Object(i["a"])(_e,$e,we,!1,null,"40f66a74",null),Ce=ke.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"el-input-width",attrs:{clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"广告"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.items.push({})}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加广告")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.items,(function(t,s){return a("el-col",{key:s,attrs:{md:24}},[a("el-form-item",{staticStyle:{"margin-top":"1rem"},attrs:{label:"跳转链接"}},[a("el-input",{staticClass:"el-input-width",attrs:{clearable:""},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"item.url"}})],1),a("el-form-item",{staticStyle:{"margin-top":"1rem"},attrs:{label:"图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t,"image",a.url)}}},[t.image?a("img",{staticClass:"avatar",attrs:{src:t.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"5rem"},attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.items.splice(s,1)}}},[e._v("删除 ")])],1)],1)})),1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"5rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},Se=[],Ie={components:{Breadcrumb:O},props:{id:{}},data(){return{model:{items:[]},breadcrumbItem:["运营管理","广告管理",`${this.id?"编辑广告":"新建广告"}`]}},methods:{async save(){let e;this.id?(e=await this.$http.put(`rest/ads/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/ads",this.model),this.model=e.data),this.$router.push("/ads/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/ads/${this.id}`);this.model=e.data}},created(){this.id&&this.fetch()}},Be=Ie,qe=Object(i["a"])(Be,ze,Se,!1,null,"05396492",null),je=qe.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/ads/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.items,height:"550",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"name",label:"广告名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/ads/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},Ne=[],Ee={components:{Breadcrumb:O},data(){return{items:[],breadcrumbItem:["运营管理","广告管理"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/ads?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query = ${this.query}`);this.items=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除广告"${e.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/ads/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},Ue=Ee,Ae=Object(i["a"])(Ue,Oe,Ne,!1,null,"63af1b08",null),Te=Ae.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",{staticStyle:{width:"50%"}},[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},Re=[],De={components:{Breadcrumb:O},props:{id:{}},data(){return{model:{},breadcrumbItem:["系统设置","管理员",`${this.id?"编辑管理员":"新建管理员"}`]}},methods:{async save(){let e;this.id?(e=await this.$http.put(`rest/admin_users/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/admin_users",this.model),this.model=e.data),this.$router.push("/admin_users/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/admin_users/${this.id}`);this.model=e.data}},created(){this.id&&this.fetch()}},He=De,Le=Object(i["a"])(He,Pe,Re,!1,null,"4cefaa17",null),Me=Le.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/admin_users/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.items,height:"250",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/admin_users/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},Ge=[],Ve={components:{Breadcrumb:O},data(){return{items:[],breadcrumbItem:["系统设置","管理员"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/admin_users?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query = ${this.query}`);this.items=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除管理员"${e.username}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/admin_users/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},Fe=Ve,Ze=Object(i["a"])(Fe,Je,Ge,!1,null,"4f832d20",null),We=Ze.exports,Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("h1",[e._v(e._s(e.id?"编辑":"新建")+"模块")]),a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"上级模块"}},[a("el-select",{model:{value:e.model.parent,callback:function(t){e.$set(e.model,"parent",t)},expression:"model.parent"}},e._l(e.parents,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"模块名称"}},[a("el-input",{attrs:{clearable:"",maxlength:"10"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},Xe=[],Ye={props:{id:{}},data(){return{model:{},parents:[]}},methods:{async save(){let e;this.id?(e=await this.$http.put(`rest/models/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/models",this.model),this.model=e.data),this.$router.push("/models/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/models/${this.id}`);this.model=e.data},async fetchParents(){const e=await this.$http.get("rest/models");this.parents=e.data}},created(){this.fetchParents(),this.id&&this.fetch()}},Qe=Ye,et=Object(i["a"])(Qe,Ke,Xe,!1,null,"7b200511",null),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("模块列表")]),a("div",[a("el-button",{staticStyle:{"margin-bottom":".5rem"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.push("/models/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1),a("el-table",{attrs:{data:e.items,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"parent.name",label:"上级模块"}}),a("el-table-column",{attrs:{prop:"name",label:"模块名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/models/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1)],1)},st=[],lt={data(){return{items:[]}},methods:{async fetch(){const e=await this.$http.get("rest/models");this.items=e.data},async remove(e){this.$confirm(`是否删除模块"${e.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/models/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})}},created(){this.fetch()}},rt=lt,it=Object(i["a"])(rt,at,st,!1,null,"624167e4",null),nt=it.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"80px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"封面图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.model.image=t.url},"before-upload":e.beforeAvatarUpload}},[e.model.image?a("img",{staticClass:"avatar",attrs:{src:e.model.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"所属分类"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"视频"}},[a("el-upload",{attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.model.video=t.url},drag:"",multiple:""}},[e.model.video?a("video",{attrs:{src:e.model.video,width:"355",controls:""}}):e._e(),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("el-form-item",{attrs:{label:"投稿"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.submit,callback:function(t){e.$set(e.model,"submit",t)},expression:"model.submit"}})],1),a("el-form-item",{attrs:{label:"粉丝"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.fan,callback:function(t){e.$set(e.model,"fan",t)},expression:"model.fan"}})],1),a("el-form-item",{attrs:{label:"观看次数"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.see,callback:function(t){e.$set(e.model,"see",t)},expression:"model.see"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"5rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},ct=[],ut={props:{id:{}},components:{Breadcrumb:O},data(){return{model:{title:"",image:"",video:"",submit:"",fan:"",see:""},categories:[],breadcrumbItem:["运营管理","视频管理",`${this.id?"编辑视频":"新建视频"}`]}},methods:{afterUpload(e){this.model.image=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},async save(){let e;this.id?(e=await this.$http.put(`rest/videos/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/videos",this.model),this.model=e.data),this.$router.push("/videos/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/videos/${this.id}`);this.model=e.data},async getCategories(){const e=await this.$http.get("rest/categories");this.categories=e.data},async handleImageAdded(e,t,a,s){const l=new FormData;l.append("file",e);const r=await this.$http.post("upload",l);t.insertEmbed(a,"image",r.data.url),s()}},created(){this.id&&this.fetch(),this.getCategories()}},mt=ut,dt=(a("1b23"),Object(i["a"])(mt,ot,ct,!1,null,null,null)),pt=dt.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/videos/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.videos,height:"550",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"title",label:"视频标题"}}),a("el-table-column",{attrs:{prop:"image",label:"封面图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"3rem"},attrs:{src:e.row.image,alt:""}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/videos/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},bt=[],ft={components:{Breadcrumb:O},data(){return{videos:[],breadcrumbItem:["运营管理","视频视频"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/videos?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query=${this.query}`);this.videos=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除视频"${e.title}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/videos/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},gt=ft,vt=Object(i["a"])(gt,ht,bt,!1,null,"0d74bdce",null),yt=vt.exports,$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("el-form-item",{attrs:{label:"攻略分类"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"封面图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upLoadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.model.image=t.url},"before-upload":e.beforeAvatarUpload}},[e.model.image?a("img",{staticClass:"avatar",attrs:{src:e.model.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"正文"}},[a("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.model.body,callback:function(t){e.$set(e.model,"body",t)},expression:"model.body"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)],1)},wt=[],xt={props:{id:{}},components:{VueEditor:be["a"],Breadcrumb:O},data(){return{model:{},categories:[],breadcrumbItem:["运营管理","图文攻略",`${this.id?"编辑攻略":"新建攻略"}`]}},methods:{afterUpload(e){this.model.image=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG格式!"),a||this.$message.error("上传封面图片大小不能超过 2MB!"),t&&a},async save(){let e;this.id?(e=await this.$http.put(`rest/guides/${this.id}`,this.model),this.model=e.data):(e=await this.$http.post("rest/guides",this.model),this.model=e.data),this.$router.push("/guides/list"),this.id?this.$message({type:"success",message:"修改成功"}):this.$message({type:"success",message:"保存成功"})},async fetch(){const e=await this.$http.get(`rest/guides/${this.id}`);this.model=e.data},async fetchCatgories(){const e=await this.$http.get("rest/categories");this.categories=e.data},async handleImageAdded(e,t,a,s){const l=new FormData;l.append("file",e);const r=await this.$http.post("upload",l);t.insertEmbed(a,"image",r.data.url),s()}},created(){this.fetchCatgories(),this.id&&this.fetch()}},_t=xt,kt=Object(i["a"])(_t,$t,wt,!1,null,null,null),Ct=kt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{breadcrumbItem:e.breadcrumbItem}}),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.fetch()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.fetch()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/guides/create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.guides,border:"",stripe:"",height:"550"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"230"}}),a("el-table-column",{attrs:{prop:"title",label:"攻略标题"}}),a("el-table-column",{attrs:{prop:"image",label:"封面图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"3rem"},attrs:{src:e.row.image,alt:""}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return e.$router.push("/guides/edit/"+t.row._id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(a){return e.remove(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,20,25],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},St=[],It={components:{Breadcrumb:O},data(){return{guides:[],breadcrumbItem:["运营管理","图文攻略"],total:0,query:"",pageNum:1,pageSize:10}},methods:{async fetch(){const e=await this.$http.get(`rest/guides?pageNum=${this.pageNum}&pageSize=${this.pageSize}&query=${this.query}`);this.guides=e.data.items,this.total=e.data.count},async remove(e){this.$confirm(`是否删除图文攻略"${e.title}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete(`rest/guides/${e._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()}).catch(()=>{})},handleCurrentChange(e){this.pageNum=e,this.fetch()},handleSizeChange(e){this.pageSize=e,this.fetch()}},created(){this.fetch()}},Bt=It,qt=Object(i["a"])(Bt,zt,St,!1,null,"1c2073bc",null),jt=qt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._m(1),a("SmallFace")],1)},Nt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"welcome-container"},[a("h1",[e._v("WELCOME HERE！")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"text"},[e._v(" 本项目地址： "),a("a",{attrs:{href:"https://github.com/JakeZhangZJK/vue--node-mongodb-wzry/tree/master/admin"}},[e._v("https://github.com/JakeZhangZJK/vue--node-mongodb-wzry/tree/master/admin ")]),e._v(" 欢迎star！ ")])}],Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{mousemove:function(t){return e.moveEye()}}},[a("div",{staticClass:"face show"},[a("div",{staticClass:"eyes"},[a("div",{ref:"eye1",staticClass:"eye"}),a("div",{ref:"eye2",staticClass:"eye"})])])])},Ut=[],At={data(){return{active:""}},methods:{moveEye(){let e=this.$refs.eye1,t=this.$refs.eye2,a=e.getBoundingClientRect().left+e.clientWidth/2,s=e.getBoundingClientRect().top+e.clientHeight/2,l=Math.atan2(event.pageX-a,event.pageY-s),r=l*(180/Math.PI)*-1+270;e.style.transform=`rotate(${r}deg)`;let i=t.getBoundingClientRect().left+t.clientWidth/2,n=t.getBoundingClientRect().top+t.clientHeight/2,o=Math.atan2(event.pageX-i,event.pageY-n),c=o*(180/Math.PI)*-1+270;t.style.transform=`rotate(${c}deg)`}}},Tt=At,Pt=(a("f3a8"),Object(i["a"])(Tt,Et,Ut,!1,null,"48390a32",null)),Rt=Pt.exports,Dt={components:{SmallFace:Rt},data(){return{}},methods:{}},Ht=Dt,Lt=(a("9e70"),Object(i["a"])(Ht,Ot,Nt,!1,null,"57cb6d4c",null)),Mt=Lt.exports;s["default"].use(d["a"]);const Jt=new d["a"]({routes:[{path:"/login",name:"login",component:k,meta:{isPublic:!0}},{path:"/",name:"main",component:v,redirect:"/welcome",children:[{path:"/welcome",component:Mt},{path:"/categories/create",component:A},{path:"/categories/edit/:id",component:A,props:!0},{path:"/categories/list",component:L},{path:"/items/create",component:Z},{path:"/items/edit/:id",component:Z,props:!0},{path:"/items/list",component:ee},{path:"/heroes/create",component:ie},{path:"/heroes/edit/:id",component:ie,props:!0},{path:"/heroes/list",component:de},{path:"/articles/create",component:ye},{path:"/articles/edit/:id",component:ye,props:!0},{path:"/articles/list",component:Ce},{path:"/ads/create",component:je},{path:"/ads/edit/:id",component:je,props:!0},{path:"/ads/list",component:Te},{path:"/admin_users/create",component:Me},{path:"/admin_users/edit/:id",component:Me,props:!0},{path:"/admin_users/list",component:We},{path:"/models/create",component:tt},{path:"/models/edit/:id",component:tt,props:!0},{path:"/models/list",component:nt},{path:"/Videos/create",component:pt},{path:"/Videos/edit/:id",component:pt,props:!0},{path:"/Videos/list",component:yt},{path:"/guides/create",component:Ct},{path:"/guides/edit/:id",component:Ct,props:!0},{path:"/guides/list",component:jt}]}]});Jt.beforeEach((e,t,a)=>{if(!e.meta.isPublic&&!localStorage.token)return a("/login");a()});var Gt=Jt,Vt=(a("38c8"),a("bc3a")),Ft=a.n(Vt);const Zt=Ft.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_API_URL||"/admin/api"});Zt.interceptors.request.use((function(e){return localStorage.token&&(e.headers.Authorization="Bearer "+localStorage.token),e}),(function(e){return Promise.reject(e)})),Zt.interceptors.response.use(e=>{return e},e=>{return e.response.data.message&&(s["default"].prototype.$message({type:"error",message:e.response.data.message}),401===e.response.status&&Gt.push("/login")),Promise.reject(e)});var Wt=Zt,Kt=a("541b"),Xt=a.n(Kt);s["default"].use(Xt.a),s["default"].use(be["a"]),s["default"].config.productionTip=!1,s["default"].prototype.$http=Wt,s["default"].mixin({computed:{upLoadUrl(){return this.$http.defaults.baseURL+"/upload"}},methods:{getAuthHeaders(){return{Authorization:`Bearer ${localStorage.token||""}`}}}}),new s["default"]({router:Gt,render:e=>e(c)}).$mount("#app")},7342:function(e,t,a){"use strict";var s=a("8568"),l=a.n(s);l.a},"78a1":function(e,t,a){},8386:function(e,t,a){},8568:function(e,t,a){},"85ec":function(e,t,a){},"97b0":function(e,t,a){"use strict";var s=a("19c5"),l=a.n(s);l.a},"9de8":function(e,t,a){"use strict";var s=a("d8ad"),l=a.n(s);l.a},"9e70":function(e,t,a){"use strict";var s=a("8386"),l=a.n(s);l.a},a40c:function(e,t,a){"use strict";var s=a("ddc0"),l=a.n(s);l.a},b189:function(e,t,a){e.exports=a.p+"img/logo1.d555ce04.png"},c69f:function(e,t,a){},d8ad:function(e,t,a){},ddc0:function(e,t,a){},e32b:function(e,t,a){},f3a8:function(e,t,a){"use strict";var s=a("78a1"),l=a.n(s);l.a}});
//# sourceMappingURL=app.fd91c855.js.map